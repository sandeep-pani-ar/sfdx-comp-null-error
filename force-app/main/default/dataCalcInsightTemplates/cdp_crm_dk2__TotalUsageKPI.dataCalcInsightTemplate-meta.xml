<?xml version="1.0" encoding="UTF-8"?>
<DataCalcInsightTemplate xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <builderExpression>{&quot;version&quot;:&quot;2.0&quot;,&quot;app&quot;:{&quot;insightType&quot;:&quot;CALCULATED_METRIC&quot;},&quot;dataNodes&quot;:{&quot;LOAD_DATA_SOURCE0&quot;:{&quot;id&quot;:&quot;LOAD_DATA_SOURCE0&quot;,&quot;action&quot;:&quot;load&quot;,&quot;parameters&quot;:{&quot;dataset&quot;:{&quot;label&quot;:&quot;Asset&quot;,&quot;name&quot;:&quot;ssot__Asset__dlm&quot;,&quot;creationType&quot;:&quot;Standard&quot;,&quot;isExternal&quot;:false,&quot;isExternalObjectInErrorStatus&quot;:false,&quot;type&quot;:&quot;dmo&quot;},&quot;fields&quot;:[&quot;ssot__Id__c&quot;,&quot;ssot__AssetLevelNumber__c&quot;,&quot;ssot__Name__c&quot;,&quot;ssot__AssetQuantity__c&quot;,&quot;ssot__AssetStatus__c&quot;,&quot;ssot__AvailablePercent__c&quot;,&quot;ssot__AverageUptimePerDayMinutesQuantity__c&quot;,&quot;ssot__BillToAccountId__c&quot;,&quot;ssot__CnsqncOfAssetFailure__c&quot;,&quot;ssot__CreatedById__c&quot;,&quot;ssot__CreatedDate__c&quot;,&quot;ssot__DataSourceId__c&quot;,&quot;ssot__DataSourceObjectId__c&quot;,&quot;ssot__Description__c&quot;,&quot;ssot__DigitalAssetStatus__c&quot;,&quot;ssot__DigitalAssetStatusReason__c&quot;,&quot;ssot__DowntimeSumQuantity__c&quot;,&quot;ssot__ExpectedUptimePercent__c&quot;,&quot;ssot__ExternalRecordId__c&quot;,&quot;ssot__GeocodeAccuracyType__c&quot;,&quot;ssot__InstallDateTime__c&quot;,&quot;ssot__InternalOrganizationId__c&quot;,&quot;ssot__IsCompetitorAsset__c&quot;,&quot;ssot__IsDeleted__c&quot;,&quot;ssot__isInternal__c&quot;,&quot;KQ_Id__c&quot;,&quot;KQ_LocationId__c&quot;,&quot;KQ_ParentAssetId__c&quot;,&quot;KQ_ProductId__c&quot;,&quot;KQ_RootAssetId__c&quot;,&quot;ssot__LastModifiedById__c&quot;,&quot;ssot__LastModifiedDate__c&quot;,&quot;ssot__Latitude__c&quot;,&quot;ssot__LocationId__c&quot;,&quot;ssot__Longitude__c&quot;,&quot;ssot__ManufactureDate__c&quot;,&quot;ssot__ParentAssetId__c&quot;,&quot;ssot__PriceAmount__c&quot;,&quot;ssot__PrimaryContactId__c&quot;,&quot;ssot__ProductId__c&quot;,&quot;ssot__ProductCodeText__c&quot;,&quot;ssot__ProductDescription__c&quot;,&quot;ssot__ProductFamilyName__c&quot;,&quot;ssot__PurchaseDate__c&quot;,&quot;ssot__RootAssetId__c&quot;,&quot;ssot__SerialNumber__c&quot;,&quot;ssot__ServicerAccountId__c&quot;,&quot;ssot__StockKeepingUnit__c&quot;,&quot;ssot__SupplierAccountId__c&quot;,&quot;ssot__SystemModstamp__c&quot;,&quot;ssot__TotalUsage__c&quot;,&quot;ssot__TotalUsageUnitOfMeasure__c&quot;,&quot;ssot__UniqueIdentifier__c&quot;,&quot;ssot__UnplannedDowntimeSumQuantity__c&quot;,&quot;ssot__UptimeRecordEndDateTime__c&quot;,&quot;ssot__UptimeRecordStartDateTime__c&quot;]},&quot;sources&quot;:[]},&quot;LOAD_DATA_SOURCE1&quot;:{&quot;id&quot;:&quot;LOAD_DATA_SOURCE1&quot;,&quot;action&quot;:&quot;load&quot;,&quot;parameters&quot;:{&quot;dataset&quot;:{&quot;label&quot;:&quot;Product&quot;,&quot;name&quot;:&quot;ssot__Product__dlm&quot;,&quot;creationType&quot;:&quot;Standard&quot;,&quot;isExternal&quot;:false,&quot;isExternalObjectInErrorStatus&quot;:false,&quot;type&quot;:&quot;dmo&quot;},&quot;fields&quot;:[&quot;ssot__DataSourceId__c&quot;,&quot;ssot__DataSourceObjectId__c&quot;,&quot;ssot__ExpectedLifespanNumber__c&quot;,&quot;ssot__ExpectedLifespanUOM__c&quot;,&quot;ssot__ExpectedLifetimeUsageNumber__c&quot;,&quot;ssot__ExpectedLifetimeUsageUOM__c&quot;,&quot;KQ_Id__c&quot;,&quot;ssot__ProductCode__c&quot;,&quot;ssot__Description__c&quot;,&quot;ssot__ProductFamily__c&quot;,&quot;ssot__Id__c&quot;,&quot;ssot__Name__c&quot;,&quot;ssot__ProductSKU__c&quot;]},&quot;sources&quot;:[]},&quot;JOIN0&quot;:{&quot;id&quot;:&quot;JOIN0&quot;,&quot;action&quot;:&quot;join&quot;,&quot;parameters&quot;:{&quot;joinType&quot;:&quot;inner&quot;,&quot;leftKeys&quot;:[&quot;ssot__ProductId__c&quot;,&quot;KQ_ProductId__c&quot;],&quot;rightQualifier&quot;:&quot;Product&quot;,&quot;rightKeys&quot;:[&quot;ssot__Id__c&quot;,&quot;KQ_Id__c&quot;]},&quot;sources&quot;:[&quot;LOAD_DATA_SOURCE0&quot;,&quot;LOAD_DATA_SOURCE1&quot;]},&quot;ARITHMETIC_EXPRESSION0&quot;:{&quot;id&quot;:&quot;ARITHMETIC_EXPRESSION0&quot;,&quot;action&quot;:&quot;arithmetic_expression&quot;,&quot;parameters&quot;:{&quot;expressions&quot;:[{&quot;name&quot;:&quot;TotalUsageStandardized&quot;,&quot;label&quot;:&quot;TotalUsageStandardized&quot;,&quot;expression&quot;:[{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.ssot__ExpectedLifetimeUsageNumber__c&quot;,&quot;source&quot;:&quot;JOIN0&quot;}},{&quot;operator&quot;:&quot;substract&quot;,&quot;expressionType&quot;:&quot;operator&quot;},{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;ssot__TotalUsage__c&quot;,&quot;source&quot;:&quot;JOIN0&quot;}}]},{&quot;operator&quot;:&quot;divide&quot;,&quot;expressionType&quot;:&quot;operator&quot;},{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.ssot__ExpectedLifetimeUsageNumber__c&quot;,&quot;source&quot;:&quot;JOIN0&quot;}},{&quot;operator&quot;:&quot;multiply&quot;,&quot;expressionType&quot;:&quot;operator&quot;},{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:100,&quot;valueType&quot;:&quot;number&quot;}}]},{&quot;name&quot;:&quot;UsageToLifetimeRatio&quot;,&quot;label&quot;:&quot;UsageToLifetimeRatio&quot;,&quot;expression&quot;:[{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;ssot__TotalUsage__c&quot;,&quot;source&quot;:&quot;JOIN0&quot;}},{&quot;operator&quot;:&quot;divide&quot;,&quot;expressionType&quot;:&quot;operator&quot;},{&quot;expressionType&quot;:&quot;operand&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.ssot__ExpectedLifetimeUsageNumber__c&quot;,&quot;source&quot;:&quot;JOIN0&quot;}}]}]},&quot;sources&quot;:[&quot;JOIN0&quot;]},&quot;CASE0&quot;:{&quot;id&quot;:&quot;CASE0&quot;,&quot;action&quot;:&quot;case&quot;,&quot;parameters&quot;:{&quot;cases&quot;:[{&quot;name&quot;:&quot;TotalUsageKPIVar&quot;,&quot;label&quot;:&quot;TotalUsageKPIVar&quot;,&quot;returnValueType&quot;:&quot;number&quot;,&quot;whenConditions&quot;:[{&quot;expression&quot;:{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;condition&quot;,&quot;leftOperand&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;ARITHMETIC_EXPRESSION0&quot;,&quot;value&quot;:&quot;TotalUsageStandardized&quot;},&quot;operator&quot;:&quot;less_or_equal&quot;,&quot;rightOperands&quot;:[{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0,&quot;valueType&quot;:&quot;number&quot;}]}]},&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0,&quot;valueType&quot;:&quot;number&quot;}}],&quot;elseCondition&quot;:{&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;value&quot;:&quot;TotalUsageStandardized&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;ARITHMETIC_EXPRESSION0&quot;}}}]},&quot;sources&quot;:[&quot;ARITHMETIC_EXPRESSION0&quot;]},&quot;CASE1&quot;:{&quot;id&quot;:&quot;CASE1&quot;,&quot;action&quot;:&quot;case&quot;,&quot;parameters&quot;:{&quot;cases&quot;:[{&quot;name&quot;:&quot;TotalUsageSymbolVar&quot;,&quot;label&quot;:&quot;TotalUsageSymbolVar&quot;,&quot;returnValueType&quot;:&quot;text&quot;,&quot;whenConditions&quot;:[{&quot;expression&quot;:{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;condition&quot;,&quot;leftOperand&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;CASE0&quot;,&quot;value&quot;:&quot;UsageToLifetimeRatio&quot;},&quot;operator&quot;:&quot;greater_than&quot;,&quot;rightOperands&quot;:[{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0.8,&quot;valueType&quot;:&quot;number&quot;}]}]},&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:&quot;Critical&quot;,&quot;valueType&quot;:&quot;text&quot;}},{&quot;expression&quot;:{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;condition&quot;,&quot;leftOperand&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;CASE0&quot;,&quot;value&quot;:&quot;UsageToLifetimeRatio&quot;},&quot;operator&quot;:&quot;less_or_equal&quot;,&quot;rightOperands&quot;:[{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0.2,&quot;valueType&quot;:&quot;number&quot;}]}]},&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:&quot;Looking good&quot;,&quot;valueType&quot;:&quot;text&quot;}}],&quot;elseCondition&quot;:{&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:&quot;Warning&quot;,&quot;valueType&quot;:&quot;text&quot;}}}]},&quot;sources&quot;:[&quot;CASE0&quot;]},&quot;AGGREGATE0&quot;:{&quot;id&quot;:&quot;AGGREGATE0&quot;,&quot;action&quot;:&quot;aggregate&quot;,&quot;parameters&quot;:{&quot;measures&quot;:[{&quot;name&quot;:&quot;TotalUsageKPI&quot;,&quot;label&quot;:&quot;TotalUsageKPI&quot;,&quot;functionName&quot;:&quot;sum&quot;,&quot;parameters&quot;:{&quot;expression&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;TotalUsageKPIVar&quot;,&quot;source&quot;:&quot;CASE1&quot;}}}],&quot;dimensions&quot;:[{&quot;name&quot;:&quot;AssetId&quot;,&quot;label&quot;:&quot;AssetId&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;ssot__Id__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;TotalUsageSymbol&quot;,&quot;label&quot;:&quot;TotalUsageSymbol&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;TotalUsageSymbolVar&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;ExpectedLifetimeUsage&quot;,&quot;label&quot;:&quot;ExpectedLifetimeUsage&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.ssot__ExpectedLifetimeUsageNumber__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;ExpectedLifetimeUsageUnitOfMeasure&quot;,&quot;label&quot;:&quot;ExpectedLifetimeUsageUnitOfMeasure&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.ssot__ExpectedLifetimeUsageUOM__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;TotalUsage&quot;,&quot;label&quot;:&quot;TotalUsage&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;ssot__TotalUsage__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;TotalUsageUnitOfMeasure&quot;,&quot;label&quot;:&quot;TotalUsageUnitOfMeasure&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;ssot__TotalUsageUnitOfMeasure__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;KeyQualifierAssetId&quot;,&quot;label&quot;:&quot;KeyQualifierAssetId&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;KQ_Id__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;KeyQualifierProductId&quot;,&quot;label&quot;:&quot;KeyQualifierProductId&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;Product.KQ_Id__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}}]},&quot;sources&quot;:[&quot;CASE1&quot;]}},&quot;ui&quot;:{&quot;nodes&quot;:{&quot;LOAD_DATA_SOURCE0&quot;:{&quot;label&quot;:&quot;Asset&quot;,&quot;type&quot;:&quot;LOAD_DATA_SOURCE&quot;,&quot;top&quot;:112,&quot;left&quot;:112},&quot;LOAD_DATA_SOURCE1&quot;:{&quot;label&quot;:&quot;Product&quot;,&quot;type&quot;:&quot;LOAD_DATA_SOURCE&quot;,&quot;top&quot;:252,&quot;left&quot;:112},&quot;JOIN0&quot;:{&quot;label&quot;:&quot;Join&quot;,&quot;type&quot;:&quot;JOIN&quot;,&quot;top&quot;:112,&quot;left&quot;:252},&quot;ARITHMETIC_EXPRESSION0&quot;:{&quot;label&quot;:&quot;Calculate TotalUsageStandardized &amp; UsageToLifeTimeRatio&quot;,&quot;type&quot;:&quot;ARITHMETIC_EXPRESSION&quot;,&quot;top&quot;:112,&quot;left&quot;:392},&quot;CASE0&quot;:{&quot;label&quot;:&quot;Handle Out of Range Values&quot;,&quot;type&quot;:&quot;CASE&quot;,&quot;top&quot;:112,&quot;left&quot;:532},&quot;CASE1&quot;:{&quot;label&quot;:&quot;Map Value to Condition&quot;,&quot;type&quot;:&quot;CASE&quot;,&quot;top&quot;:112,&quot;left&quot;:672},&quot;AGGREGATE0&quot;:{&quot;label&quot;:&quot;Specify Output&quot;,&quot;type&quot;:&quot;AGGREGATE&quot;,&quot;top&quot;:112,&quot;left&quot;:812}},&quot;connectors&quot;:[{&quot;targetNodeId&quot;:&quot;JOIN0&quot;,&quot;sourceNodeId&quot;:&quot;LOAD_DATA_SOURCE0&quot;},{&quot;targetNodeId&quot;:&quot;JOIN0&quot;,&quot;sourceNodeId&quot;:&quot;LOAD_DATA_SOURCE1&quot;},{&quot;targetNodeId&quot;:&quot;ARITHMETIC_EXPRESSION0&quot;,&quot;sourceNodeId&quot;:&quot;JOIN0&quot;},{&quot;targetNodeId&quot;:&quot;CASE0&quot;,&quot;sourceNodeId&quot;:&quot;ARITHMETIC_EXPRESSION0&quot;},{&quot;targetNodeId&quot;:&quot;CASE1&quot;,&quot;sourceNodeId&quot;:&quot;CASE0&quot;},{&quot;targetNodeId&quot;:&quot;AGGREGATE0&quot;,&quot;sourceNodeId&quot;:&quot;CASE1&quot;}]}}</builderExpression>
    <creationType>Custom</creationType>
    <dataspaceName>default</dataspaceName>
    <dataspacePrefix xsi:nil="true"/>
    <definitionType>CALCULATED_METRIC</definitionType>
    <description>Determine total usage, map the value to a condition, and standardize the value into a score between 1 to 100.</description>
    <developerName>TotalUsageKPI</developerName>
    <expression>SELECT
  SUM( CASE  WHEN (( ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c - ssot__Asset__dlm.ssot__TotalUsage__c ) / ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c * 100) &lt;= 0 THEN 0 ELSE (( ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c - ssot__Asset__dlm.ssot__TotalUsage__c ) / ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c * 100) END) AS totalusagekpi__c,
  ssot__Asset__dlm.ssot__Id__c AS assetid__c,
   CASE  WHEN (ssot__Asset__dlm.ssot__TotalUsage__c / ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c) &gt; 8E-1 THEN &apos;Critical&apos; WHEN (ssot__Asset__dlm.ssot__TotalUsage__c / ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c) &lt;= 2E-1 THEN &apos;Looking good&apos; ELSE &apos;Warning&apos; END AS totalusagesymbol__c,
  ssot__Product__dlm.ssot__ExpectedLifetimeUsageNumber__c AS expectedlifetimeusage__c,
  ssot__Product__dlm.ssot__ExpectedLifetimeUsageUOM__c AS expectedlifetimeusageunitofmeasure__c,
  ssot__Asset__dlm.ssot__TotalUsage__c AS totalusage__c,
  ssot__Asset__dlm.ssot__TotalUsageUnitOfMeasure__c AS totalusageunitofmeasure__c,
  ssot__Asset__dlm.KQ_Id__c AS keyqualifierassetid__c,
  ssot__Product__dlm.KQ_Id__c AS keyqualifierproductid__c
FROM ssot__Asset__dlm
  JOIN ssot__Product__dlm
    ON (ssot__Asset__dlm.ssot__ProductId__c = ssot__Product__dlm.ssot__Id__c AND ssot__Asset__dlm.KQ_ProductId__c = ssot__Product__dlm.KQ_Id__c)
GROUP BY
  assetid__c,
  totalusagesymbol__c,
  expectedlifetimeusage__c,
  expectedlifetimeusageunitofmeasure__c,
  totalusage__c,
  totalusageunitofmeasure__c,
  keyqualifierassetid__c,
  keyqualifierproductid__c</expression>
    <masterLabel>TotalUsageKPI</masterLabel>
</DataCalcInsightTemplate>
