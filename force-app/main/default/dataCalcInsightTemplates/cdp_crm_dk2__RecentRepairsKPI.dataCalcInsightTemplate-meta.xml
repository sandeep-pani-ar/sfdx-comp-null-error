<?xml version="1.0" encoding="UTF-8"?>
<DataCalcInsightTemplate xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <builderExpression>{&quot;version&quot;:&quot;2.0&quot;,&quot;app&quot;:{&quot;insightType&quot;:&quot;CALCULATED_METRIC&quot;},&quot;dataNodes&quot;:{&quot;LOAD_DATA_SOURCE0&quot;:{&quot;id&quot;:&quot;LOAD_DATA_SOURCE0&quot;,&quot;action&quot;:&quot;load&quot;,&quot;parameters&quot;:{&quot;dataset&quot;:{&quot;label&quot;:&quot;NumberOfRepairsInLast180Days&quot;,&quot;name&quot;:&quot;NumberOfRepairsInLast180Days__cio&quot;,&quot;creationType&quot;:&quot;Insights&quot;,&quot;isExternal&quot;:false,&quot;isExternalObjectInErrorStatus&quot;:false,&quot;type&quot;:&quot;dmo&quot;},&quot;fields&quot;:[&quot;assetid__c&quot;,&quot;keyqualifierasset__c&quot;,&quot;keyqualifierassetid__c&quot;,&quot;recentrepairs__c&quot;]},&quot;sources&quot;:[]},&quot;CASE0&quot;:{&quot;id&quot;:&quot;CASE0&quot;,&quot;action&quot;:&quot;case&quot;,&quot;parameters&quot;:{&quot;cases&quot;:[{&quot;name&quot;:&quot;RecentRepairsStandardized&quot;,&quot;label&quot;:&quot;RecentRepairsStandardized&quot;,&quot;returnValueType&quot;:&quot;number&quot;,&quot;whenConditions&quot;:[{&quot;expression&quot;:{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;condition&quot;,&quot;leftOperand&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;LOAD_DATA_SOURCE0&quot;,&quot;value&quot;:&quot;recentrepairs__c&quot;},&quot;operator&quot;:&quot;equal&quot;,&quot;rightOperands&quot;:[{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0,&quot;valueType&quot;:&quot;number&quot;}]}]},&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:100,&quot;valueType&quot;:&quot;number&quot;}}],&quot;elseCondition&quot;:{&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0,&quot;valueType&quot;:&quot;number&quot;}}}]},&quot;sources&quot;:[&quot;LOAD_DATA_SOURCE0&quot;]},&quot;CASE1&quot;:{&quot;id&quot;:&quot;CASE1&quot;,&quot;action&quot;:&quot;case&quot;,&quot;parameters&quot;:{&quot;cases&quot;:[{&quot;name&quot;:&quot;RecentRepairsSymbolVar&quot;,&quot;label&quot;:&quot;RecentRepairsSymbolVar&quot;,&quot;returnValueType&quot;:&quot;text&quot;,&quot;whenConditions&quot;:[{&quot;expression&quot;:{&quot;expressionType&quot;:&quot;group&quot;,&quot;expressionValues&quot;:[{&quot;expressionType&quot;:&quot;condition&quot;,&quot;leftOperand&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;source&quot;:&quot;CASE0&quot;,&quot;value&quot;:&quot;RecentRepairsStandardized&quot;},&quot;operator&quot;:&quot;equal&quot;,&quot;rightOperands&quot;:[{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:0,&quot;valueType&quot;:&quot;number&quot;}]}]},&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:&quot;Critical&quot;,&quot;valueType&quot;:&quot;text&quot;}}],&quot;elseCondition&quot;:{&quot;returnValue&quot;:{&quot;resourceType&quot;:&quot;constant&quot;,&quot;value&quot;:&quot;Looking good&quot;,&quot;valueType&quot;:&quot;text&quot;}}}]},&quot;sources&quot;:[&quot;CASE0&quot;]},&quot;AGGREGATE0&quot;:{&quot;id&quot;:&quot;AGGREGATE0&quot;,&quot;action&quot;:&quot;aggregate&quot;,&quot;parameters&quot;:{&quot;measures&quot;:[{&quot;name&quot;:&quot;RecentRepairsKPI&quot;,&quot;label&quot;:&quot;RecentRepairsKPI&quot;,&quot;functionName&quot;:&quot;sum&quot;,&quot;parameters&quot;:{&quot;expression&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;RecentRepairsStandardized&quot;,&quot;source&quot;:&quot;CASE1&quot;}}}],&quot;dimensions&quot;:[{&quot;name&quot;:&quot;AssetId&quot;,&quot;label&quot;:&quot;AssetId&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;assetid__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;RecentRepairs&quot;,&quot;label&quot;:&quot;RecentRepairs&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;recentrepairs__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;RecentRepairsSymbol&quot;,&quot;label&quot;:&quot;RecentRepairsSymbol&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;RecentRepairsSymbolVar&quot;,&quot;source&quot;:&quot;CASE1&quot;}},{&quot;name&quot;:&quot;KeyQualifierAssetId&quot;,&quot;label&quot;:&quot;KeyQualifierAssetId&quot;,&quot;resource&quot;:{&quot;resourceType&quot;:&quot;field&quot;,&quot;valueType&quot;:&quot;text&quot;,&quot;value&quot;:&quot;keyqualifierassetid__c&quot;,&quot;source&quot;:&quot;CASE1&quot;}}]},&quot;sources&quot;:[&quot;CASE1&quot;]}},&quot;ui&quot;:{&quot;nodes&quot;:{&quot;LOAD_DATA_SOURCE0&quot;:{&quot;label&quot;:&quot;NumberOfRepairsInLast180Days&quot;,&quot;type&quot;:&quot;LOAD_DATA_SOURCE&quot;,&quot;top&quot;:112,&quot;left&quot;:112},&quot;CASE0&quot;:{&quot;label&quot;:&quot;Calculate RecentRepairStandardized&quot;,&quot;type&quot;:&quot;CASE&quot;,&quot;top&quot;:112,&quot;left&quot;:252},&quot;CASE1&quot;:{&quot;label&quot;:&quot;Map Value to Condition&quot;,&quot;type&quot;:&quot;CASE&quot;,&quot;top&quot;:112,&quot;left&quot;:392},&quot;AGGREGATE0&quot;:{&quot;label&quot;:&quot;Specify Output&quot;,&quot;type&quot;:&quot;AGGREGATE&quot;,&quot;top&quot;:112,&quot;left&quot;:532}},&quot;connectors&quot;:[{&quot;targetNodeId&quot;:&quot;CASE0&quot;,&quot;sourceNodeId&quot;:&quot;LOAD_DATA_SOURCE0&quot;},{&quot;targetNodeId&quot;:&quot;CASE1&quot;,&quot;sourceNodeId&quot;:&quot;CASE0&quot;},{&quot;targetNodeId&quot;:&quot;AGGREGATE0&quot;,&quot;sourceNodeId&quot;:&quot;CASE1&quot;}]}}</builderExpression>
    <creationType>Custom</creationType>
    <dataspaceName>default</dataspaceName>
    <dataspacePrefix xsi:nil="true"/>
    <definitionType>CALCULATED_METRIC</definitionType>
    <description>Use NumberOfRepairsInLast180Days to determine the recent repair count, map the value to a condition, and standardize the value into a score between 1 to 100.</description>
    <developerName>RecentRepairsKPI</developerName>
    <expression>SELECT
  SUM( CASE  WHEN NumberOfRepairsInLast180Days__cio.recentrepairs__c = 0 THEN 100 ELSE 0 END) AS recentrepairskpi__c,
  NumberOfRepairsInLast180Days__cio.assetid__c AS assetid__c,
  NumberOfRepairsInLast180Days__cio.recentrepairs__c AS recentrepairs__c,
   CASE  WHEN  CASE  WHEN NumberOfRepairsInLast180Days__cio.recentrepairs__c = 0 THEN 100 ELSE 0 END = 0 THEN &apos;Critical&apos; ELSE &apos;Looking good&apos; END AS recentrepairssymbol__c,
  NumberOfRepairsInLast180Days__cio.keyqualifierassetid__c AS keyqualifierassetid__c
FROM NumberOfRepairsInLast180Days__cio
GROUP BY
  assetid__c,
  recentrepairs__c,
  recentrepairssymbol__c,
  keyqualifierassetid__c</expression>
    <masterLabel>RecentRepairsKPI</masterLabel>
</DataCalcInsightTemplate>
